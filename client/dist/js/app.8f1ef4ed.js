(function(e){function t(t){for(var r,i,s=t[0],a=t[1],c=t[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);u&&u(t);while(p.length)p.shift()();return l.push.apply(l,c||[]),n()}function n(){for(var e,t=0;t<l.length;t++){for(var n=l[t],r=!0,s=1;s<n.length;s++){var a=n[s];0!==o[a]&&(r=!1)}r&&(l.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={app:0},l=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],a=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=a;l.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},3503:function(e,t,n){"use strict";n("80b5")},"400d":function(e,t,n){"use strict";n("9fe5")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function o(e,t,n,o,l,i){var s=Object(r["w"])("requests");return Object(r["o"])(),Object(r["f"])(s)}n("a4d3"),n("e01a"),n("9911");var l=n("610a"),i=n.n(l),s=Object(r["G"])("data-v-29d886c2");Object(r["r"])("data-v-29d886c2");var a={class:"container mb-14 p-8"},c=Object(r["i"])("img",{alt:"bees",src:i.a,style:{opacity:"60%",width:"35%",display:"block","margin-left":"auto","margin-right":"auto"}},null,-1),u=Object(r["i"])("p",{class:"mt-8 font-medium font-sans text-2xl"},"Poll'em",-1),d=Object(r["i"])("p",{class:"font-sans mb-8"},[Object(r["h"])(" A simple & hassle-free poll application "),Object(r["i"])("span",{class:"font-thin"}," with a Haskell backend.")],-1),p={key:0,class:"m-4"},b={key:1,class:"m-4"},h=Object(r["i"])("p",null," You do not appear to be authenticated on this app. This means you can only view already existing polls. How about you authenticate so that you can start creating polls? ",-1),f={class:"m-8"},g={key:1,class:"disabled:opacity-50 ml-2 p-1 bg-green-500 text-white font-semibold rounded-lg shadow-md",disabled:""},k={key:0,class:"mt-4"},O={key:1,class:"disabled:opacity-50 p-1 bg-green-500 text-white font-semibold rounded-lg shadow-md hover:bg-green-700 focus:ring-opacity-75",disabled:""},m={key:1,class:"mt-10"},j={id:"takingPoll",class:"flex flex-col"},v=Object(r["i"])("label",{for:"takingMultiple"},"Allowed to select multiple answers?",-1),y=Object(r["i"])("label",{for:"takingVisible"},"Results visible during poll?",-1),_={class:"space-x-3"},w=Object(r["i"])("label",{for:"takingStartDate"},"Poll started at:",-1),P={key:0},x=Object(r["i"])("label",{class:"space-y-3",for:"takingEndDate"},"(optional) Poll due to close at:",-1),D={key:2},S=Object(r["i"])("p",null,"Nothing to render.",-1),A={id:"creatingPoll",class:"flex flex-col"},C={class:"mt-5"},q=Object(r["i"])("label",{for:"creatingMultiple"},"Allow to select multiple answers",-1),V=Object(r["i"])("label",{for:"creatingVisible"},"Make results visible during poll",-1),T={class:"mt-3 space-y-2"},$=Object(r["i"])("label",{for:"creatingStartDate"},"Poll should start at:",-1),M=Object(r["i"])("br",null,null,-1),I=Object(r["i"])("label",{for:"creatingEndDate"},"(optional) Poll should end at:",-1),J={key:0},N={key:0,class:"font-bold"},R={key:1,class:"font-bold"},E={class:"mt-5"},U=Object(r["i"])("p",{class:"text-sm font-light"}," You've taken or created polls you think should be displayed here? You can retrieve your entire history. Please be considerate in your use of this feature, as the database is not optimized for this (expect serious debounce). Also your last created poll might be missing if you created it very recently. ",-1);Object(r["p"])();var H=s((function(e,t,n,o,l,i){var H=Object(r["w"])("tab"),G=Object(r["w"])("vue-echarts"),Y=Object(r["w"])("datepicker"),z=Object(r["w"])("tabs");return Object(r["o"])(),Object(r["f"])("div",a,[c,u,d,Object(r["i"])("div",null,[Object(r["i"])(z,{modelValue:o.active,"onUpdate:modelValue":t[19]||(t[19]=function(e){return o.active=e})},{default:s((function(){return[Object(r["i"])(H,{title:"Your account"},{default:s((function(){return[i.loggedIn?(Object(r["o"])(),Object(r["f"])("div",p,[Object(r["i"])("p",null,"Welcome, "+Object(r["y"])(l.user.email),1),Object(r["i"])("button",{onClick:t[1]||(t[1]=function(){return i.logout&&i.logout.apply(i,arguments)}),class:"mt-2 p-1 bg-red-500 text-white font-semibold rounded-lg shadow-md hover:bg-green-700 focus:ring-opacity-75"}," Logout ")])):(Object(r["o"])(),Object(r["f"])("div",b,[h,Object(r["i"])("div",f,[Object(r["i"])("div",null,[Object(r["E"])(Object(r["i"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.user.email=e}),type:"text",placeholder:"email address",disabled:l.user.token_asked},null,8,["disabled"]),[[r["A"],l.user.email]]),l.user.token_asked?(Object(r["o"])(),Object(r["f"])("button",g," Authenticate ")):(Object(r["o"])(),Object(r["f"])("button",{key:0,onClick:t[3]||(t[3]=function(){return i.askToken&&i.askToken.apply(i,arguments)}),class:"ml-2 p-1 bg-yellow-500 text-white font-semibold rounded-lg shadow-md hover:bg-green-700 focus:ring-opacity-75"}," Authenticate "))]),l.user.token_asked?(Object(r["o"])(),Object(r["f"])("div",k,[Object(r["E"])(Object(r["i"])("input",{"onUpdate:modelValue":t[4]||(t[4]=function(e){return l.user.token=e}),type:"text",placeholder:"paste the token here"},null,512),[[r["A"],l.user.token]]),l.user.token.length>3&&!l.user.token_sent?(Object(r["o"])(),Object(r["f"])("button",{key:0,onClick:t[5]||(t[5]=function(){return i.confirmToken&&i.confirmToken.apply(i,arguments)}),class:"p-1 bg-yellow-500 text-white font-semibold rounded-lg shadow-md hover:bg-green-700 focus:ring-opacity-75"}," Confirm token ")):Object(r["g"])("",!0),l.user.token_sent?(Object(r["o"])(),Object(r["f"])("button",O," Confirm token ")):Object(r["g"])("",!0)])):Object(r["g"])("",!0)])]))]})),_:1}),Object(r["i"])(H,{title:"Take the poll"},{default:s((function(){return["dev"!==l.AppMode||l.takingPoll.startDate?Object(r["g"])("",!0):(Object(r["o"])(),Object(r["f"])("button",{key:0,onClick:t[6]||(t[6]=function(){return i.testChart&&i.testChart.apply(i,arguments)})}," Test chart ")),l.takingPoll.startDate?(Object(r["o"])(),Object(r["f"])("div",m,[Object(r["i"])("div",j,[Object(r["i"])("div",null,[Object(r["i"])("textarea",{id:"takingQuestion",rows:"2",cols:"30",value:l.takingPoll.question,disabled:""},null,8,["value"])]),l.chart.results.length>0&&l.takingPoll.visible?(Object(r["o"])(),Object(r["f"])(G,{key:0,option:l.chart.options,style:i.chartStyle,ref:"chart"},null,8,["option","style"])):Object(r["g"])("",!0),Object(r["i"])("div",null,[Object(r["i"])("textarea",{id:"takingDescription",rows:"3",cols:"45",value:l.takingPoll.description,disabled:""},null,8,["value"])]),(Object(r["o"])(!0),Object(r["f"])(r["a"],null,Object(r["u"])(l.takingPoll.results,(function(e,t){return Object(r["o"])(),Object(r["f"])("div",{key:t},[Object(r["i"])("div",null,[Object(r["i"])("label",null,Object(r["y"])(e.text),1),Object(r["i"])("input",{class:"ml-4",type:"checkbox",onChange:function(e){return i.toggleResults(t)},checked:e.value},null,40,["onChange","checked"])])])})),128)),Object(r["i"])("div",null,[v,Object(r["i"])("input",{class:"mx-3 mr-5",type:"checkbox",id:"takingMultiple",checked:l.takingPoll.multiple,disabled:""},null,8,["checked"]),y,Object(r["i"])("input",{class:"mx-3 mr-5",type:"checkbox",id:"takingVisible",checked:l.takingPoll.visible,disabled:""},null,8,["checked"])]),Object(r["i"])("div",_,[w,Object(r["i"])("input",{type:"text",id:"takingStartDate",value:l.takingPoll.startDate,disabled:""},null,8,["value"]),l.takingPoll.endDate?(Object(r["o"])(),Object(r["f"])("div",P,[x,Object(r["i"])("input",{type:"text",id:"takingEndDate",value:l.takingPoll.endDate,disabled:""},null,8,["value"])])):Object(r["g"])("",!0)])]),"prod"===l.AppMode?(Object(r["o"])(),Object(r["f"])("button",{key:0,onClick:t[7]||(t[7]=function(){return i.takePoll&&i.takePoll.apply(i,arguments)}),class:"my-5 w-1/3 bg-yellow-500 text-white font-semibold rounded-lg shadow-md hover:bg-green-700 focus:ring-opacity-75"}," Take the poll ")):(Object(r["o"])(),Object(r["f"])("button",{key:1,onClick:t[8]||(t[8]=function(){return i.testSubmitPoll&&i.testSubmitPoll.apply(i,arguments)}),class:"my-5 w-1/3 bg-yellow-500 text-white font-semibold rounded-lg shadow-md hover:bg-green-700 focus:ring-opacity-75"}," Take the poll "))])):(Object(r["o"])(),Object(r["f"])("div",D,[S]))]})),_:1}),Object(r["i"])(H,{title:"Create a poll"},{default:s((function(){return[Object(r["i"])("div",A,[Object(r["i"])("div",null,[Object(r["E"])(Object(r["i"])("textarea",{id:"creatingQuestion",rows:"2",cols:"30","onUpdate:modelValue":t[9]||(t[9]=function(e){return l.creatingPoll.question=e})},null,512),[[r["A"],l.creatingPoll.question]])]),Object(r["i"])("div",null,[Object(r["E"])(Object(r["i"])("textarea",{id:"creatingDescription",rows:"3",cols:"45","onUpdate:modelValue":t[10]||(t[10]=function(e){return l.creatingPoll.description=e})},null,512),[[r["A"],l.creatingPoll.description]])]),Object(r["i"])("div",null,[(Object(r["o"])(!0),Object(r["f"])(r["a"],null,Object(r["u"])(l.creatingPoll.answers,(function(e,t){return Object(r["o"])(),Object(r["f"])("div",{class:"my-4",key:"answer"+t},[Object(r["i"])("label",{class:"mr-4",for:"creatingAnswer"+t},"Answer #"+Object(r["y"])(t+1),9,["for"]),Object(r["i"])("input",{type:"text",onInput:function(e){return l.creatingPoll.answers[t]=e.target.value}},null,40,["onInput"])])})),128))]),Object(r["i"])("div",null,[Object(r["i"])("button",{onClick:t[11]||(t[11]=function(){return i.addAnswer&&i.addAnswer.apply(i,arguments)}),class:"p-1 bg-yellow-500 text-white font-semibold rounded-lg shadow-md hover:bg-green-700 focus:ring-opacity-75"}," more answers... "),l.creatingPoll.answers.length>2?(Object(r["o"])(),Object(r["f"])("button",{key:0,onClick:t[12]||(t[12]=function(){return i.removeAnswer&&i.removeAnswer.apply(i,arguments)}),class:"ml-2 p-1 bg-yellow-500 text-white font-semibold rounded-lg shadow-md hover:bg-green-700 focus:ring-opacity-75"}," less ")):Object(r["g"])("",!0)]),Object(r["i"])("div",C,[q,Object(r["E"])(Object(r["i"])("input",{class:"mx-3 mr-5",type:"checkbox",id:"creatingMultiple","onUpdate:modelValue":t[13]||(t[13]=function(e){return l.creatingPoll.multiple=e})},null,512),[[r["z"],l.creatingPoll.multiple]]),V,Object(r["E"])(Object(r["i"])("input",{class:"mx-3 mr-5",type:"checkbox",id:"creatingVisible","onUpdate:modelValue":t[14]||(t[14]=function(e){return l.creatingPoll.visible=e})},null,512),[[r["z"],l.creatingPoll.visible]])]),Object(r["i"])("div",T,[$,Object(r["i"])(Y,{id:"creatingStartDate",modelValue:l.creatingPoll.startDate,"onUpdate:modelValue":t[15]||(t[15]=function(e){return l.creatingPoll.startDate=e})},null,8,["modelValue"]),M,I,Object(r["i"])(Y,{id:"creatingEndDate",modelValue:l.creatingPoll.endDate,"onUpdate:modelValue":t[16]||(t[16]=function(e){return l.creatingPoll.endDate=e})},null,8,["modelValue"])])]),Object(r["i"])("button",{onClick:t[17]||(t[17]=function(){return i.createPoll&&i.createPoll.apply(i,arguments)}),class:"my-5 w-1/3 bg-yellow-500 text-white font-semibold rounded-lg shadow-md hover:bg-green-700 focus:ring-opacity-75"}," Create the poll ")]})),_:1}),i.loggedIn?(Object(r["o"])(),Object(r["f"])(H,{key:0,title:"My Polls"},{default:s((function(){return[i.mypolls?(Object(r["o"])(),Object(r["f"])("div",J,[l.user.created.length>0?(Object(r["o"])(),Object(r["f"])("p",N," Created ")):Object(r["g"])("",!0),(Object(r["o"])(!0),Object(r["f"])(r["a"],null,Object(r["u"])(l.user.created,(function(e,t){return Object(r["o"])(),Object(r["f"])("div",{key:t,class:"grid grid-cols-3 gap-1"},[Object(r["i"])("input",{value:e.question,disabled:""},null,8,["value"]),Object(r["i"])("input",{value:e.startDate,disabled:""},null,8,["value"]),e.endDate?(Object(r["o"])(),Object(r["f"])("input",{key:0,value:e.endDate,disabled:""},null,8,["value"])):Object(r["g"])("",!0),Object(r["i"])("a",{href:e.link,target:"_blank"},"Go to poll",8,["href"])])})),128)),l.user.taken.length>0?(Object(r["o"])(),Object(r["f"])("p",R," Taken ")):Object(r["g"])("",!0),(Object(r["o"])(!0),Object(r["f"])(r["a"],null,Object(r["u"])(l.user.taken,(function(e,t){return Object(r["o"])(),Object(r["f"])("div",{key:t,class:"grid grid-cols-3 gap-1"},[Object(r["i"])("input",{value:e.question,disabled:""},null,8,["value"]),Object(r["i"])("input",{value:e.startDate,disabled:""},null,8,["value"]),e.endDate?(Object(r["o"])(),Object(r["f"])("input",{key:0,value:e.endDate,disabled:""},null,8,["value"])):Object(r["g"])("",!0),Object(r["i"])("a",{href:e.link,target:"_blank"},"Go to poll",8,["href"])])})),128)),Object(r["i"])("div",E,[U,Object(r["i"])("button",{onClick:t[18]||(t[18]=function(){return i.restoreHistory&&i.restoreHistory.apply(i,arguments)}),class:"mt-4 p-1 bg-yellow-500 text-white font-semibold rounded-lg shadow-md hover:bg-green-700 focus:ring-opacity-75"}," Retrieve entire history ")])])):Object(r["g"])("",!0)]})),_:1})):Object(r["g"])("",!0)]})),_:1},8,["modelValue"])])])})),G=n("3835"),Y=(n("caad"),n("2532"),n("b64b"),n("1276"),n("ac1f"),n("d3b7"),n("25f0"),n("d81d"),n("7db0"),n("99af"),n("159b"),n("4de4"),n("4fad"),n("24e7")),z=n("6f08"),B=n("a5bb"),L={class:"mx-80 object-center"},Q={class:"flex flex-row"},F=Object(r["i"])("div",{class:"bg-gray-300 -m-1 h-1"},null,-1),W={class:"mt-6"};function K(e,t,n,o,l,i){return Object(r["o"])(),Object(r["f"])("div",L,[Object(r["i"])("ul",Q,[(Object(r["o"])(!0),Object(r["f"])(r["a"],null,Object(r["u"])(o.tabs,(function(e,t){return Object(r["o"])(),Object(r["f"])("li",{key:t,class:[o.active===t?"border-b-4 border-yellow-500 text-gray-800":"border-b-2 border-white text-gray-500","flex items-center px-6 py-3 rounded-tl-md rounded-tr-md overflow-hidden cursor-pointer hover:text-gray-800"],onClick:function(e){return o.selectTab(t)}},Object(r["y"])(e.props.title),11,["onClick"])})),128))]),F,Object(r["i"])("div",W,[Object(r["v"])(e.$slots,"default")])])}n("a9e3");var X={name:"Tabs",props:{modelValue:{type:[String,Number]}},emits:["update:modelValue"],setup:function(e,t){var n=t.emit,o=Object(r["d"])((function(){return e.modelValue})),l=Object(r["s"])([]);function i(e){n("update:modelValue",e)}return Object(r["q"])("tabsState",{active:o,tabs:l}),{tabs:l,active:o,selectTab:i}}};X.render=K;var Z=X,ee={key:0};function te(e,t,n,o,l,i){return o.isActive?(Object(r["o"])(),Object(r["f"])("div",ee,[Object(r["v"])(e.$slots,"default")])):Object(r["g"])("",!0)}n("c740");var ne={name:"Tab",props:{title:String},setup:function(){var e=Object(r["k"])(),t=Object(r["m"])("tabsState"),n=t.tabs,o=t.active,l=Object(r["d"])((function(){return n.value.findIndex((function(t){return t.uid===e.uid}))})),i=Object(r["d"])((function(){return l.value===o.value}));return Object(r["C"])((function(){-1===l.value&&n.value.push(e)})),{isActive:i}}};ne.render=te;var re=ne,oe=null,le=null,ie={noLocalStorage:"`localStorage API` not supported, this application will not work properly.",noCookieSet:"Sorry but you appear to have cleared your cookies",loaded:"App loaded successfully.",endpoint:"The endpoint ran into an error: "},se={status:!0,check:function(){return localStorage||(this.status=!1),this.status},set:function(e){localStorage.setItem("pollem-user",JSON.stringify(e))},get:function(){return JSON.parse(localStorage.getItem("pollem-user"))},clear:function(){localStorage.removeItem("pollem-user")}},ae={endpoints:{dev:"http://localhost:8009",prod:"https://pollem-now.herokuapp.com"},client:{dev:"http://localhost:8080",prod:"https://hardcore-hopper-66afd6.netlify.app/"},routes:{post:{ask_token:["ask_email"],close:["close_hash","close_token","close_pollid"],confirm_token:["confirm_token","confirm_fingerprint","confirm_email"],create:["create_hash","create_token","create_recipe","create_startDate","create_recipe"],myhistory:["myhistory_hash","myhistory_token"],take:["take_fingerprint","take_hash","take_token","take_results"]},get:["get","warmup"]},tryRoute:function(e,t){return Object.keys(this.routes[e]).includes(t)?"/"+t:null},ascertain:function(e){var t=e.split("/"),n=t[3],r=t[4];if("get"!==n)return{secret:null,pollid:null};if(r.includes("secret")){var o=r.split("?"),l=o[1],i=l.split("=")[1],s=o[0];return{pollid:s,secret:i}}return{pollid:r,secret:null}}},ce={name:"requests",components:{Tabs:Z,Tab:re,VueEcharts:z["a"],Datepicker:Y["a"]},data:function(){return{AppMode:"dev",creatingPoll:{startDate:null,endDate:null,question:"question...",description:"description...",multiple:!1,visible:!1,private:!1,answers:["Answer#1","Answer#2"]},takingPoll:{},chart:{results:[],options:{}},user:{token:"",hash:"",email:"",fingerprint:"",created:[],taken:[],token_asked:!1,token_sent:!1}}},setup:function(){var e,t=ae.ascertain(window.location.href),n=t.pollid,o=t.secret;return null!==n?(oe=parseInt(n),le=o,e=Object(r["s"])(1)):e=Object(r["s"])(0),{active:e}},mounted:function(){var e=this;B["a"].load().then((function(e){return e.get()})).then((function(t){if(se.check()?(e.user=null===se.get()?e.user:se.get(),e.user.fingerprint=t.visitorId):e.$toast.error(ie.noLocalStorage),e.creatingPoll.startDate=new Date,null===oe)return e.$toast.success(ie.loaded),void fetch(ae.endpoints[e.AppMode]+"/warmup").then((function(e){return e.json()})).then((function(t){return e.$toast.info(t)}));var n=ae.endpoints[e.AppMode]+"/get/"+oe.toString(),r=null===le?n:n+"?secret="+le;return fetch(r).catch((function(t){return e.$toast.error(t)})).then((function(e){return e.json()})).then((function(t){if(t.resp_get_poll){var n=JSON.parse(t.resp_get_poll);e.takingPoll=n,e.takingPoll.results=n.answers.map((function(e){return{text:e,value:!1}})),t.resp_get_poll_results&&(e.chart.results=t.resp_get_poll_results.map((function(e){return parseInt(e)})),e.setChartOptions()),e.$toast.success(ie.loaded+" Here is your poll. ("+t.resp_get_poll_msg+")")}else e.$toast.error("Either the poll was not received or could not be decoded, aborting. Unable to carry on.")}))}))},computed:{loggedIn:function(){return[this.user.token,this.user.hash,this.user.email,this.user.fingerprint].every((function(e){return""!==e}))},chartStyle:function(){var e=this.takingPoll.answers.length;return 0===e?null:"width: 900px; height: "+(75*e).toString()+"px"},mypolls:function(){return this.user.created.length>0||this.user.taken.length>0}},methods:{testUser:function(){this.user.email="garbo email",this.user.hash="garbo hash",this.user.fingerprint="garbo fingerprint",this.user.token="garbo token"},testChart:function(){var e=this,t={startDate:new Date,question:"How to make an omelette without breaking any egg?",description:"Some description",multiple:!1,visible:!0,answers:["AnswerA","AnswerB","AnswerC","AnswerD","AnswerE","AnswerF","AnswerG"]},n={resp_get_poll_results:[3,5,9,8,7,8,1],resp_get_poll:JSON.stringify(t),resp_get_poll_msg:"Ok fine"};return Promise.resolve(JSON.stringify(n)).catch((function(t){return e.$toast.error(t)})).then((function(t){var n=JSON.parse(t);e.takingPoll=JSON.parse(n.resp_get_poll),e.takingPoll.results=e.takingPoll.answers.map((function(e){return{text:e,value:!1}})),n.resp_get_poll_results&&(e.chart.results=n.resp_get_poll_results.map((function(e){return parseInt(e)})),e.setChartOptions()),e.$toast.success(n.resp_get_poll_msg)}))},testSubmitPoll:function(){var e=this,t={take_fingerprint:this.user.fingerprint,take_hash:this.user.hash,take_token:this.user.token,take_results:this.takingPoll.answers.map((function(t){return e.takingPoll.results.find((function(e){return e.text===t})).value})),take_pollid:oe};console.log(JSON.stringify(t))},setChartOptions:function(){this.chart.options={yAxis:{type:"category",data:[].concat(this.takingPoll.answers).reverse()},xAxis:{type:"value"},series:[{data:this.chart.results,type:"bar",showBackground:!1,backgroundStyle:{color:"rgba(0, 177, 124, 1)"}}]}},toggleResults:function(e){this.takingPoll.results[e].value=!this.takingPoll.results[e].value,this.takingPoll.multiple||this.takingPoll.results.forEach((function(t,n){return t.value=n===e&&t.value}))},addAnswer:function(){var e=this.creatingPoll.answers.length+1;this.creatingPoll.answers.push("Answer#"+e.toString())},removeAnswer:function(){this.creatingPoll.answers.pop()},makeReq:function(e,t,n){var r=this,o=ae.endpoints[this.AppMode],l=ae.tryRoute(e,t);if(null!==l){var i=o+l;if(ae.routes.get.includes(t))return fetch(i).catch((function(e){return r.$toast.error(e)})).then((function(e){return e.json()}));var s=ae.routes.post[t].filter((function(e){return!Object.keys(n).includes(e)}));if(!(s.length>0)){var a={headers:{"Content-Type":"application/json",Accept:"application/json"},method:"POST",body:JSON.stringify(n)};return fetch(i,a).catch((function(e){return r.$toast.error(e)})).then((function(e){return e.json()}))}this.$toast.error("Missing key(s) from payload: "+JSON.stringify(s))}else this.$toast.error("Bad endpoint! Request aborted.")},askToken:function(){var e=this;this.user.token_asked=!0;var t={ask_email:this.user.email};return this.makeReq("post","ask_token",t).then((function(t){e.$toast.success(t.resp_ask_token,{duration:1e4})}))},confirmToken:function(){var e=this;this.user.token_sent=!0;var t={confirm_token:this.user.token,confirm_fingerprint:this.user.fingerprint,confirm_email:this.user.email};return this.makeReq("post","confirm_token",t).then((function(t){t.resp_confirm_token&&t.resp_confirm_hash?(e.user.token=t.resp_confirm_token,e.user.hash=t.resp_confirm_hash,e.$toast.success(t.resp_confirm_msg)):e.$toast.warning(t.resp_confirm_msg)}))},createPoll:function(){var e=this,t={poll_startDate:this.creatingPoll.startDate,poll_question:this.creatingPoll.question,poll_description:this.creatingPoll.description,poll_multiple:this.creatingPoll.multiple,poll_visible:this.creatingPoll.visible,poll_answers:this.creatingPoll.answers},n={create_hash:this.user.hash,create_token:this.user.token,create_startDate:this.creatingPoll.startDate};null!==this.creatingPoll.endDate&&(t.poll_endDate=this.creatingPoll.endDate,n.create_endDate=this.creatingPoll.endDate);var r=["poll_startDate","poll_question","poll_description","poll_visible","poll_multiple","poll_answers"].filter((function(e){return!Object.keys(t).includes(e)}));if(!(r.length>0))return n.create_recipe=JSON.stringify(t),this.makeReq("post","create",n).then((function(t){e.$toast.success(t.resp_create_msg);var n={question:e.creatingPoll.question,startDate:e.creatingPoll.startDate,link:ae.endpoints[e.AppMode]+"/"+t.resp_create_pollid.toString(),secret:t.resp_create_pollsecret};e.creatingPoll.endDate&&(n.endDate=e.creatingPoll.endDate),e.user.created.push(n)}));this.$toast.error("Missing key from poll: "+JSON.stringigify(r))},closePoll:function(){var e=this,t={close_hash:this.user.hash,close_token:this.user.token,close_pollid:oe};return this.makeReq("post","close",t).then((function(t){return e.$toast.success(t.resp_close_msg)}))},takePoll:function(){var e=this,t={take_fingerprint:this.user.fingerprint,take_hash:this.user.hash,take_token:this.user.token,take_results:this.takingPoll.answers.map((function(t){return e.takingPoll.results.find((function(e){return e.text===t})).value})),take_pollid:oe};return this.makeReq("post","take",t).then((function(t){return e.$toast.success(t.resp_take_msg)}))},restoreHistory:function(){var e=this,t={myhistory_hash:this.user.hash,myhistory_token:this.user.token};return this.user.created=[],this.user.taken=[],this.makeReq("post","myhistory",t).then((function(t){if(null!==t.resp_myhistory){e.$toast.success(t.resp_myhistory_msg),console.log("Attempting to decode pol...");for(var n=t.resp_myhistory_polls,r=t.resp_myhistory_created,o=0,l=Object.entries(n);o<l.length;o++){var i=Object(G["a"])(l[o],2),s=i[0],a=i[1],c=JSON.parse(a[2][1]);console.log(c);var u=a[3][2],d=a[3][3],p={question:c.poll_question,link:ae.endpoints[e.AppMode]+"/get/"+s.toString(),startDate:u,secret:d};r.includes(s)?e.user.created.push(p):e.user.taken.push(p)}}else e.$toast.error(t.resp_myhistory_msg)}))},logout:function(){this.user={token:"",hash:"",email:"",fingerprint:"",created:[],taken:[],token_asked:!1,token_sent:!1},se.clear()}},watch:{user:{deep:!0,handler:function(e){[this.user.token,this.user.hash,this.user.email,this.user.fingerprint,this.user.created,this.user.taken].every((function(e){return""!==e}))&&se.set(e)}}}};n("400d");ce.render=H,ce.__scopeId="data-v-29d886c2";var ue=ce,de={name:"App",components:{Requests:ue}};n("3503");de.render=o;var pe=de,be=n("af56");n("a766");Object(r["e"])(pe).use(be["a"],{position:"top-left"}).mount("#app")},"610a":function(e,t,n){e.exports=n.p+"img/bees_thumb.93bd0569.png"},"80b5":function(e,t,n){},"9fe5":function(e,t,n){},a766:function(e,t,n){}});
//# sourceMappingURL=app.8f1ef4ed.js.map